---
title: "Decomposition"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
setwd("../..")
source("./Src/Functions/ref.R")

endScope <- c(2017, 3)
xaupln.xts <- xts(xaupln$Close, order.by = xaupln$Date)
xaupln.xts.m <- xaupln.xts %>% to.monthly(name = "m")
xaupln.ts <- ts(OpCl(xaupln.xts.m['1984-01/']), start = c(1984, 1), end = endScope, frequency = 12)
xaupln.ts.d <- decompose(xaupln.ts)
xaupln.short.ts <- ts(OpCl(xaupln.xts.m['2012-01/']), start = c(2012, 1), end = endScope, frequency = 12)
xaupln.short.ts.d <- decompose(xaupln.short.ts)

xauusd.xts <- xts(xauusd$Close, order.by = xauusd$Date)
xauusd.xts.m <- xauusd.xts %>% to.monthly(name = "m")
xauusd.ts <- ts(OpCl(xauusd.xts.m['1984-01/']), start = c(1984, 1), end = endScope, frequency = 12)
xauusd.ts.d <- decompose(xauusd.ts)

xauusd.short.ts <- ts(OpCl(xauusd.xts.m['2012-01/']), start = c(2012, 1), end = endScope, frequency = 12)
xauusd.short.ts.d <- decompose(xauusd.short.ts)

```

## Jak wygląda dekompozycja?
```{r setup, include=FALSE}
plot(xaupln.ts.d)
plot(xauusd.ts.d)
```


## Jaki jest trend długoterminowy?
```{r}
plot(xaupln.ts.d$trend)
plot(xauusd.ts.d$trend)
```
## Jaki jest trend krótkoterminowy?
```{r}
plot(xaupln.short.ts.d$trend)
plot(xauusd.short.ts.d$trend)
```

## W jakim miesiącu najlepiej jest kupić/sprzedać w okresie długoterminowym?
```{r}
xaupln.ts.d$seasonal[1:12] %>% plot(type = "l")
xauusd.ts.d$seasonal[1:12] %>% plot(type = "l")
```

## W jakim miesiącu najlepiej jest kupić/sprzedać w okresie krótkoterminowym?
```{r}
xaupln.short.ts.d$seasonal[1:12] %>% plot(type = "l")
xauusd.short.ts.d$seasonal[1:12] %>% plot(type = "l")
```
